import {expect} from '../chai-setup';
import {ethers} from 'hardhat';
import {SwapHelpers} from '../../typechain';

describe('EnsoHelpers', async () => {
  describe('SwapHelpers', () => {
    let swapHelpers: SwapHelpers;

    before(async () => {
      swapHelpers = <SwapHelpers>await ethers.getContract('SwapHelpers');
    });

    it('has VERSION', async () => {
      const currentVersion = 1n;
      expect(await swapHelpers.VERSION()).to.eq(currentVersion);
    });

    it('insert amount', async () => {
      const data = '0xd9627aa40000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ec3d6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48';
      const index = 1;
      const amount = '1001000000000000000';

      const newData = await swapHelpers.insertAmount(data, index, amount);

      const expectedData = '0xd9627aa400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000de444324c2a800000000000000000000000000000000000000000000000000000000000000ec3d6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48';
      expect(newData).to.eq(expectedData);
    });

  });
});
